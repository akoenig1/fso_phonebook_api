(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(15),o=n.n(r),u=(n(20),n(3)),i=(n(21),n(0)),s=function(e){var t=e.newName,n=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange,r=e.newCountry,o=e.handleCountryChange,u=e.addName;return Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:n}),Object(i.jsx)("br",{}),"number: ",Object(i.jsx)("input",{value:c,onChange:a}),Object(i.jsx)("br",{}),"country: ",Object(i.jsx)("input",{value:r,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",onClick:u,children:"add"})})]})},l=function(e){var t=e.searchCategory,n=e.searchText,c=e.handleChange;return Object(i.jsxs)("div",{children:["search by ",t,": ",Object(i.jsx)("input",{value:n,onChange:c})]})},h=function(e){var t=e.person,n=e.removeName;return Object(i.jsxs)("li",{children:[t.name,": ",t.number,", ",t.country," ",Object(i.jsx)("button",{onClick:function(){return n(t.id,t.name)},children:"Delete"})]})},b=function(e){var t=e.people,n=e.removeName;return t.map((function(e){return Object(i.jsx)(h,{person:e,removeName:n},e.name)}))},j=(n(23),function(e){var t=e.message;return t?Object(i.jsx)("div",{className:t.type,children:t.text}):null}),d=n(4),m=n.n(d),f="/api/persons",O={getAll:function(){return m.a.get(f).then((function(e){return e.data}))},create:function(e){return m.a.post(f,e).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))}},p=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),h=o[0],d=o[1],m=Object(c.useState)(""),f=Object(u.a)(m,2),p=f[0],v=f[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),C=g[0],y=g[1],N=Object(c.useState)(""),w=Object(u.a)(N,2),k=w[0],S=w[1],T=Object(c.useState)(""),A=Object(u.a)(T,2),D=A[0],E=A[1],J=Object(c.useState)([]),L=Object(u.a)(J,2),R=L[0],U=L[1],B=Object(c.useState)({}),I=Object(u.a)(B,2),M=I[0],P=I[1];Object(c.useEffect)((function(){O.getAll().then((function(e){a(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:M}),Object(i.jsx)(l,{searchCategory:"name",searchText:k,handleChange:function(e){S(e.target.value);var t=n.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));U(t)}}),Object(i.jsx)(l,{searchCategory:"country",searchText:D,handleChange:function(e){E(e.target.value);var t=n.filter((function(t){return t.country.includes(e.target.value.toUpperCase())}));U(t)}}),Object(i.jsx)("h2",{children:"Add New"}),Object(i.jsx)(s,{newName:h,handleNameChange:function(e){d(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)},newCountry:C,handleCountryChange:function(e){y(e.target.value)},addName:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===h}))[0],c=t?t.id:null;if(c){if(window.confirm("".concat(h," is already in the phonebook. Replace their old number with this one?"))){var r={name:h,number:p,country:C};O.update(c,r).then((function(e){a(n.map((function(t){return t.id!==c?t:e}))),P({text:"Updated ".concat(e.name,"'s number in phonebook"),type:"success"}),setTimeout((function(){P(null)}),3e3)})).catch((function(e){P({text:"".concat(r.name," has already been removed from the server"),type:"error"}),setTimeout((function(){P(null)}),3e3)})),d(""),v(""),y("")}}else{var o={name:h,number:p,country:C};O.create(o).then((function(e){a(n.concat(e)),d(""),v(""),y(""),P({text:"Added ".concat(e.name," to phonebook"),type:"success"}),setTimeout((function(){P(null)}),3e3)}))}}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(b,{people:""===k&&""===D?n:R,removeName:function(e,t){window.confirm("Delete ".concat(t))&&O.remove(e).then((function(c){a(n.filter((function(t){return t.id!==e}))),P({text:"Removed ".concat(t," from phonebook"),type:"success"}),setTimeout((function(){P(null)}),3e3)})).catch((function(e){alert("person does not exist on server")}))}})]})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(p,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.6828f731.chunk.js.map